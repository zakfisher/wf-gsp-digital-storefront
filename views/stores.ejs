<script type="text/template" id="template-store-list">
	{{ $(stores).each(function(i, store) { }}
		<article data-categories="{{= store.get('category_codes').join(',') }}" {{ if (store.deals.length > 0) { }}deals{{ } }}>
			<div class="col-33">
				{{ if (store.retailer.hasLogo) { }}
					<img src="//res.cloudinary.com/wlabs/image/upload/q_30,w_360,f_auto/{{= store.retailer.get('logo_ref') }}" />
				{{ } }}
				{{ if (!store.retailer.hasLogo) { }}
					<div class="retailer-logo">
						<div>
							<h1>{{= store.retailer.get('name') }}</h1>
							<h2>At Westfield</h2>
						</div>
					</div>
				{{ } }}
			</div>
			<div class="col-33">
				<h4>FLOOR</h4>
				<p>Level {{= store.get('level') }}</p>
				<h4>SHOP CATEGORIES</h4>
				<p>{{= store.categories.join(', ') }}</p>
				{{ if (store.deals.length > 0) { }}
				<h4 class="italic toggle deal">
					<div class="wf-wire-offers"></div>
					<b>See More Info + Deals</b> &raquo;
				</h4>
				{{ } }}
			</div>
			<div class="col-33">
				<h4>TODAY'S HOURS</h4>
				<p>{{= App.formatStoreHours(store) }}</p>
				{{ if (store.get('phone_number')) { }}
					<h4>PHONE</h4>
					<p>{{= store.get('phone_number') }}</p>
				{{ } }}
			</div>
			{{ if (store.deals.length > 0) { }}
			<div class="toggle-content">
				<h4><b>Take it with you - Use the Westfield App or Website for Maps &amp; Directions</b></h4>
			{{ } }}
			{{ if (store.deals.length == 0) { }}
			<div class="clr">
			{{ } }}
				{{ if (store.get('description').length > 0) { }}
				<h4>Description</h4>
				<p>{{= store.get('description') }}</p>
				{{ } }}
			</div>
		</article>
	{{ }) }}
</script>

<script type="text/template" id="template-store-filter">
	<div class="filter">
		<div class="col-50">
			<div class="select-wrapper">
				<div class="caret"></div>
				<p data-code="*">Choose Category</p>
				<ul>
					<li data-code="*">All Categories</li>
					{{ $(App.cache.categories.models).each(function(i, category) { }}
					<li data-code="{{= category.get('code') }}" {{ if (category.get('children').length > 0) { }}subcategories{{ } }}>{{= category.get('name') }}</li>
					{{ }) }}
				</ul>
			</div>
		</div>
		<div class="col-50">
			<div class="deal-toggle-btn" data-show="all">
				<div class="show-all">
					<div class="wf-wire-shopping"></div>
					<p>Show All Stores</p>
				</div>
				<div class="show-deals">
					<div class="wf-wire-offers"></div>
					<p>Show Only Stores with Deals</p>
				</div>
			</div>
		</div>
	</div>
</script>

<script type="text/template" id="template-store-sub-filter">
	<div class="col-33">
		<div class="select-wrapper">
			<div class="caret"></div>
			<p data-code="{{= parentCode }}">Choose Sub Category</p>
			<ul>
				<li data-code="{{= parentCode }}">All Sub Categories</li>
				{{ $(subCategories).each(function(i, subCategory) { }}
				<li data-code="{{= subCategory.code }}">{{= subCategory.name }}</li>
				{{ }) }}
			</ul>
		</div>
	</div>
</script>